

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; Machine Learning Genetic Algorithm for Spectral Decomposition 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Genetic Algorithm for Spectral Decomposition’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Machine Learning Genetic Algorithm for Spectral Decomposition
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#motivation">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="#what-do-genetic-algorithms-do">What do genetic algorithms do?</a></li>
<li class="toctree-l1"><a class="reference internal" href="#decomposing-a-spectrum">Decomposing a spectrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="#how-the-ga-optimization-works">How the GA optimization works</a></li>
<li class="toctree-l1"><a class="reference internal" href="#spectroscopy">Spectroscopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="#classes-and-methods">Classes and Methods</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tadata">TAData</a></li>
<li class="toctree-l2"><a class="reference internal" href="#geneticalgorithm">GeneticAlgorithm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-initial-guesses-and-reference-spectra">load_initial_guesses_and_reference_spectra</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uncertainty">uncertainty</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smooth">smooth</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cut-off">cut_off</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-ga">run_GA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ga-optimization">GA_optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evolution">evolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fitness">fitness</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ss-spline">ss_spline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qr-solve">QR_solve</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-results">save_results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#save-metadata">save_metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timeslices">timeslices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#surface-plots">surface_plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1"></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#credits-and-acknowledgements">Credits and Acknowledgements</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Machine Learning Genetic Algorithm for Spectral Decomposition</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Readme.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1 style="text-align: center;" markdown="1">Machine Learning Genetic Algorithm for <br />  
Spectral Decomposition</h1><hr class="docutils" />
<p>Documentation written by Vincent Kim, Optoelectronics Group, University of Cambridge</p>
<hr class="docutils" />
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This program runs in Python 3.7. It uses libraries such as numpy, scipy, matplotlib, and seaborn.
Data arrays are manipulated and analyzed with numpy and scipy. Visualizations are created with
matplotlib and seaborn. To run the algorithm, the user must have the spectralGA.py and
parameters.py Python modules in the same directory. To start the GA, the user must then run
spectralGA.py, which has the parameters.py module imported. Upon starting, the program will
create a subdirectory that is labeled with a timestamp, and results will be saved as text and
image files.</p>
</div>
<div class="section" id="motivation">
<h1>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">¶</a></h1>
<p>This module provides an environment to analyze time-series spectral data. It allows the user to
observe an evolving spectrum over time at various wavelengths and intensities. Furthermore, it
uses a genetic algorithm to decompose the evolving spectrum into component spectra that overlap
in time and wavelength. The main motivation of this module is to analyze data from spectroscopy
experiments. Results from this module inform the fundamental physics of how light interacts with
matter, which have continued to directly impact the design of more efficient solar panels and
light-emitting diodes (LEDs).</p>
</div>
<div class="section" id="what-do-genetic-algorithms-do">
<h1>What do genetic algorithms do?<a class="headerlink" href="#what-do-genetic-algorithms-do" title="Permalink to this headline">¶</a></h1>
<p>Genetic algorithms (GA) are a type of evolutionary algorithm (EA) that are inspired by the
concept of natural selection in evolutionary biology. They are used in machine learning for
solving optimization problems. When applied to a spectrum whose shape is changing over time, a
genetic algorithm can tell us the best way to express that spectrum as a sum of smaller spectra
whose intensities grow and decay at different rates. In this sense, the GA analyzes a complex
observation into smaller parts that are easier to understand.</p>
<p>When analyzing spectral data, those smaller parts are often called “component spectra” or
“spectral features” and they correspond to certain physical processes. In optoelectronic
experiments, they can tell us when and to what extent molecules absorb light, produce electric
charges, and emit light. Knowing how these processes are related allows us to design more
efficient solar panels and LEDs.</p>
</div>
<div class="section" id="decomposing-a-spectrum">
<h1>Decomposing a spectrum<a class="headerlink" href="#decomposing-a-spectrum" title="Permalink to this headline">¶</a></h1>
<p>This program should be fed 3-dimensional spectral data whose x, y, and z dimensions are
wavelength, time, and intensity, respectively. This data should be contained in a tab-delimited
text file whose first column contains x values, first row contains y values and whose matrix
values contain z values.</p>
<p>The following is an example of a surface plot of a spectrum:</p>
<p><img alt="_images/surfaceplot.png" src="_images/surfaceplot.png" /></p>
<p>We can take slices of this plot at certain times:</p>
<p><img alt="_images/timeslices.png" src="_images/timeslices.png" /></p>
<p>We can see the shape of the spectrum changing in both the surface plot and the plot of time
slices. This can be explained by component spectra that change at different rates. For example,
the GA would decompose the complete spectrum into two spectra as show below:</p>
<p><img alt="_images/spectra.png" src="_images/spectra.png" /></p>
<p>These spectra are normalized so that we can compare their shapes. We can graph their actual
intensities over time by plotting their <em>kinetics</em>:</p>
<p><img alt="_images/kinetics.png" src="_images/kinetics.png" /></p>
<p>We see that as the intensity of one feature decays, the intensity of the other feature grows.
If the rates of growth and decay are similar, that might mean that the presence of one feature
might lead to the presence of another feature in our model. For instance, the first feature
might be due to a material having absorbed light. The second feature might be caused by electric
charges building up in the material. In this sense, we can see to what extent and how quickly
light is converted into electricity.</p>
</div>
<div class="section" id="how-the-ga-optimization-works">
<h1>How the GA optimization works<a class="headerlink" href="#how-the-ga-optimization-works" title="Permalink to this headline">¶</a></h1>
<p>The genetic algorithm optimizes a solution through a process analogous to natural selection.
Populations are created, the fittest are selected to reproduce, mutations arise in the gene pool,
and populations evolve over time. Eventually the process is stops after a certain number of
generations or when the fitness reaches a certain value. The best individual is then chosen,
which compares to the model that best explains the observed data. This best model can then be
used to inform other related models or design processes.</p>
<p>In this program, each member of the population is a model comprised of a set of normalized spectra
that are guesses for the component spectra. The algorithm clones the first member, but randomly
mutates the shapes of the spectra in each individual. The GA then compares how each of these
similar, guessed models compares to the observed data. The guesses that are most correct are
chosen to be replaced with similar guesses in the next iteration. These new models are made by
randomly interchanging parts of the shapes of the best old models. The new models are then
slightly randomized before repeating the process again. Tying it back to the analogy, the old
models are the parents, the new models are the children, the interchange is called “crossover” and
represents how children are a mix of their parents genes.</p>
</div>
<div class="section" id="spectroscopy">
<h1>Spectroscopy<a class="headerlink" href="#spectroscopy" title="Permalink to this headline">¶</a></h1>
<p>While this genetic algorithm module can be used for different types of spectral data or any data of
a similar shape, it was designed with transient absorption spectroscopy (TAS or TA) in mind. This
is a technique used to capture processes that occur on time scales of a billionths of a second or
faster. These experiments are common in the field of optoelectronics. Therefore, names of methods
and variables in this module largely correspond to terms from those experiments. Furthermore,
explanations made up until this point have been simplified. For instance, instead of the intensity
values for the z dimension, TA values are unitless DT/T values that are specific to the TA
experiments. Explanations of TA are readily found elsewhere should someone want a more precise
discussion.</p>
</div>
<div class="section" id="classes-and-methods">
<h1>Classes and Methods<a class="headerlink" href="#classes-and-methods" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tadata">
<h2>TAData<a class="headerlink" href="#tadata" title="Permalink to this headline">¶</a></h2>
<p>Allows the user to interact with spectral data. In practice, these are normally results from
transient absorption spectroscopy (TAS or TA), which is a technique employed extensively in the field
of optoelectronics (how electronic devices interact with light).</p>
</div>
<div class="section" id="geneticalgorithm">
<h2>GeneticAlgorithm<a class="headerlink" href="#geneticalgorithm" title="Permalink to this headline">¶</a></h2>
<p>Represents a genetic algorithm for optimizing the reconstruction of observed spectral (TA) data.</p>
<div class="section" id="load-initial-guesses-and-reference-spectra">
<h3>load_initial_guesses_and_reference_spectra<a class="headerlink" href="#load-initial-guesses-and-reference-spectra" title="Permalink to this headline">¶</a></h3>
<p>Loads the initial guesses and reference spectra from text files. These spectra are provided by the
user based on theory or previous experiments. Initial guesses are modified during optimization whereas
references are not modified.</p>
</div>
<div class="section" id="uncertainty">
<h3>uncertainty<a class="headerlink" href="#uncertainty" title="Permalink to this headline">¶</a></h3>
<p>Uses the standard deviation around each point to estimate the uncertainty of that point locally.</p>
</div>
<div class="section" id="smooth">
<h3>smooth<a class="headerlink" href="#smooth" title="Permalink to this headline">¶</a></h3>
<p>Reduces noise in the TA data before running the genetic algorithm. Smoothing is currently done in
other programs, but this could be expanded to integrate with other spectral analysis modules.</p>
</div>
<div class="section" id="cut-off">
<h3>cut_off<a class="headerlink" href="#cut-off" title="Permalink to this headline">¶</a></h3>
<p>Sets the region of interest of the TA data for running the genetic algorithm.</p>
</div>
<div class="section" id="run-ga">
<h3>run_GA<a class="headerlink" href="#run-ga" title="Permalink to this headline">¶</a></h3>
<p>Constructs and runs the genetic algorithm on the TA data.</p>
</div>
<div class="section" id="ga-optimization">
<h3>GA_optimization<a class="headerlink" href="#ga-optimization" title="Permalink to this headline">¶</a></h3>
<p>Generates initial populations, noise, Gaussian functions, and new populations over many generations.</p>
</div>
<div class="section" id="evolution">
<h3>evolution<a class="headerlink" href="#evolution" title="Permalink to this headline">¶</a></h3>
<p>Holds a tournament for the best gene selections.</p>
</div>
<div class="section" id="fitness">
<h3>fitness<a class="headerlink" href="#fitness" title="Permalink to this headline">¶</a></h3>
<p>Calculates how the reconstructed spectra compare to the observed spectra.</p>
</div>
<div class="section" id="ss-spline">
<h3>ss_spline<a class="headerlink" href="#ss-spline" title="Permalink to this headline">¶</a></h3>
<p>Creates an interpolation function that is used when switching between the entire axis and the
subsampled axis.</p>
</div>
<div class="section" id="qr-solve">
<h3>QR_solve<a class="headerlink" href="#qr-solve" title="Permalink to this headline">¶</a></h3>
<p>A Python implementation of MATLAB’s right matrix division (“/”). QR_solve(A, B) performs the
equivalent of MATLAB’s A / B that solves for x in the equation Ax = B. In Python, instead of
performing A / B, it computes (B’ \ A’)’ using QR factorization.</p>
</div>
<div class="section" id="save-results">
<h3>save_results<a class="headerlink" href="#save-results" title="Permalink to this headline">¶</a></h3>
<p>Saves the results of the genetic algorithm in text files.</p>
</div>
<div class="section" id="save-metadata">
<h3>save_metadata<a class="headerlink" href="#save-metadata" title="Permalink to this headline">¶</a></h3>
<p>Saves parameters for an execution of the genetic algorithm.</p>
</div>
<div class="section" id="timeslices">
<h3>timeslices<a class="headerlink" href="#timeslices" title="Permalink to this headline">¶</a></h3>
<p>Plots time slices of the complete observed spectrum.</p>
</div>
<div class="section" id="surface-plots">
<h3>surface_plots<a class="headerlink" href="#surface-plots" title="Permalink to this headline">¶</a></h3>
<p>Plots surface maps of the total and component spectra.</p>
</div>
<div class="section" id="id1">
<h3><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<div class="section" id="credits-and-acknowledgements">
<h1>Credits and Acknowledgements<a class="headerlink" href="#credits-and-acknowledgements" title="Permalink to this headline">¶</a></h1>
<p>This module is based on an excellent genetic algorithm program written in MATLAB by Simon
Gelinas Simon Gélinas during his PhD in the Optoelectronics Group at the University of Cambridge. The
program is discussed in his thesis, and it is a wonderful resource to the group. Many thanks
to Florian Schroeder and Callum Ward for their valuable contributions to said MATLAB program.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Genetic Algorithm for Spectral Decomposition’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Vincent Oteyi Kim

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>